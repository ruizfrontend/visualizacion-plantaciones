<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link href="https://fonts.googleapis.com/css?family=Merriweather:900|Open+Sans|Roboto:400,700,900" rel="stylesheet">
    
    <link rel="stylesheet" href="http://artesansatwork.com/eldiario/wp-content/themes/appress/css/bootstrap-3.3.5.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://artesansatwork.com/eldiario/wp-content/themes/appress/css/font-faces.css?v=1490716027">
    <link rel="stylesheet" href="http://artesansatwork.com/eldiario/wp-content/themes/appress/css/app-template.css?v=1490716027">
    <link rel="stylesheet" href="http://artesansatwork.com/eldiario/wp-content/themes/appress/style.css?v=1490716027">
    <link rel="stylesheet" href="http://artesansatwork.com/eldiario/wp-content/themes/appress/css/responsive.css?v=1490716028">
    <link rel="stylesheet" href="http://artesansatwork.com/eldiario/wp-content/themes/appress/css/slick.css">
    <link rel="stylesheet" href="http://artesansatwork.com/eldiario/wp-content/themes/appress/css/slick-theme.css">
    
    
    <script src="http://artesansatwork.com/eldiario/wp-content/themes/appress/js/jquery-2.1.4.min.js"></script>
    <script src="http://artesansatwork.com/eldiario/wp-content/themes/appress/js/bootstrap-3.3.5.min.js"></script>
    <script src="http://artesansatwork.com/eldiario/wp-content/themes/appress/js/slick.min.js"></script>
    <script src="http://artesansatwork.com/eldiario/wp-content/themes/appress/js/app-template-scripts.js?v=1490716028"></script>

    
    <link rel="shortcut icon" href="http://artesansatwork.com/eldiario/wp-content/themes/appress/images/favicon.png">
	
	<title>TITEL - eldiario.es</title>
	<meta name="description" content="DESC">
	<meta name="keywords" content="KEYWS">
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta http-equiv="Content-Language" content="es-es">

	<meta property="og:title" content="TTTIEL">
	<meta property="og:description" content="DESC">
	<meta property="og:url" content="URL">
	<meta property="og:site_name" content="TTTIEL" />

	<meta name="twitter:image:src" content="JPG">
	<meta property="og:image" content="JPG">

	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@eldiarioes">
	<meta name="twitter:creator" content="@eldiarioes">
	<meta name="twitter:title" content="TTTIEL">
	<meta name="twitter:description" content="DESC">

	<meta property="fb:app_id" content="417471918268686">

	<meta name="viewport" content="width=device-width, initial-scale=1"/>

</head>

<body>

	
 <script type="text/javascript" src="http://estaticos.lab.eldiario.es/estaticos/libs/jquery.autocomplete.js"></script> <script type="text/javascript" src="http://estaticos.lab.eldiario.es/libs/d3-4.7.1.min.js"></script> <style>body{font-size:14px}#plantiGraph{width:100%;overflow:hidden;font-family:'Roboto'}#plantiGraph h1{margin:0.4em 0 1.2em 0;padding:0 0.4em;text-align:center}#plantiGraph.fullGraph h1{margin:0.4em 0;text-align:left}#plantiGraph h4{font-family:roboto,sans-serif;font-size:1.4em;font-weight:900}#plantiGraph .btn{margin-left:0;background:#999;color:white;border-radius:0;margin-bottom:0.4em;padding:0.2em 0.4em 0.2em 0.4em;margin-right:0.2em;font-weight:900}#plantiGraph .btn:hover{opacity:0.8}#plantiGraph .btn.act{background:#d35d33;color:white}#type,#prods,#years{text-align:center;box-sizing:border-box;padding:0 0.4em 1.4em 0.4em}.fullGraph #type, .fullGraph #prods, .fullGraph #years{width:33.33333333%;float:left;text-align:left}.fullGraph #type{width:30%}.fullGraph #prods{width:50%}.fullGraph #years{width:20%}#type p, #prods p, #years p{margin-bottom:0.6em}#prods img{height:25px}.fullGraph #prods img{height:20px}#prods .btn{width:50px;padding:0.6em 0}.fullGraph #prods .btn{width:auto;padding:0.2em 0.4em 0.2em 0.4em}#prods span{display:none}.fullGraph #prods span{display:initial;padding-left:0.4em}#typeImp.act{background:#126567!important}#typeExp.act{background:#d35d33!important}#yearsSel a, #yearsSel div{display:inline-block;padding:0.4em 0.6em}#yearsSel a i{font-weight:900;font-size:1.4em}#activeYear{border:1px solid #ccc}#years .disabled{cursor:inherit;color:#ccc}#graph{background:#efefef;position:relative}#graph.hover .link, #graph.hover .circImp, #graph.hover .circExp{opacity:0.2}.link{fill:none;stroke:rgba(0,0,0,0.2);stroke:url(#linearGradient);opacity:0.6;-webkit-transition:all .5s;-ms-transition:all .5s;transition:all .5s}.link-left{stroke:url(#linearGradientInverse)}.axes text{font-weight:900;font-family:roboto;fill:#aaa}.axes path{stroke-width:0}.circImp{fill:#126567;cursor:pointer}.fullGraph .circImp{-webkit-transition:all .5s;-ms-transition:all .5s;transition:all .5s}.circImpAct,.circExpAct{opacity:1!important}.linkAct{opacity: .9!important}.circExp{fill:#d35d33;cursor:pointer}.fullGraph .circExp{-webkit-transition:all .5s;-ms-transition:all .5s;transition:all .5s}.text{fill:white;font-weight:900;font-family:arial,sans-serif;font-size:10px;pointer-events:none;text-anchor:middle}.fullGraph .text{-webkit-transition:stroke .5s;-ms-transition:stroke .5s;transition:stroke .5s;font-size:12px}.circLines{stroke-width:1px;fill:white;cursor:pointer}.circLinesWhite{stroke-width:1px;stroke:white;fill:white;cursor:pointer}.linesExp{stroke:#126567}.linesImp{stroke:#d35d33}.linesExpFill{fill:#126567}.linesImpFill{fill:#d35d33}#plantiGraph.fullGraph #pop{position:absolute;top:0;height:100%;overflow:auto;right:0;width:300px;max-width:800px;background:#efefef;z-index:1;-webkit-transition:all 1s;-ms-transition:all 1s;transition:all 1s;overflow-x:hidden;border-left:2px solid white}#plantiGraph.fullGraph.actPop #pop{width:100%;-webkit-transition:all 1s;-ms-transition:all 1s;transition:all 1s}#plantiGraph.fullGraph.actPop #viz{opacity:0.6;pointer-events:none;-webkit-transform:translateX(-200px);-ms-transform:translateX(-200px);transform:translateX(-200px)}#viz{-webkit-transition:all 1s;-ms-transition:all 1s;transition:all 1s}#viz.blur{filter:url(#blur)}#closePop{position:absolute;left:-100%;position:absolute;top:0;font-weight:900;-webkit-transition:all 1s;-ms-transition:all 1s;transition:all 1s;cursor:pointer;padding:1em;height:100%;width:100%}#plantiGraph.fullGraph.actPop #closePop{left:0}#popWrap{padding:1em;display:block;opacity:0;-webkit-transition:all .2s;-ms-transition:all .3s;transition:all .3s}.actPop #popWrap{opacity:1;-webkit-transition-delay: .2s;-ms-transition-delay: .3s;transition-delay: .3s}#search{padding:1.4em;padding-bottom:0;position:relative;max-width:400px;line-height:1.3em}#search i{position:absolute;left:1.6em;top:1.6em;font-size:1.2em}#countryImput{padding-left:30px;margin-bottom:0.8em}.fullGraph #countryImput{max-width:200px;float:left;margin-right:1em}#searchSelected{display:none}#searchSelected a{display:inline-block;background:#666;padding:0.5em 2.5em 0.6em 0.8em;position:relative;color:white;font-weight:900;cursor:pointer}#searchSelected a:hover{opacity:0.8}#searchSelected a:before{content:'f00d';display:block;font-family:FontAwesome;position:absolute;right:0.8em}#graphBars1,#graphBars2,#graphLines{width:33.33333%;float:left;box-sizing:border-box;padding:0.4em;padding-top:0;margin-bottom:1em;display:none}.fullGraph #graphBars1, .fullGraph #graphBars2, .fullGraph #graphLines{display:block}#graphBars1 li, #graphBars2 li{list-style:none;line-height:1.8em}#graphBars1 .key, #graphBars2 .key{display:inline-block;width:33px;text-align:center;font-weight:900;text-transform:uppercase;line-height:1.7em}#popWrap .inn{padding:1em;background:white}#pop h4{font-size:1em;font-family:roboto,sans-serif;font-weight:900}.bar{background:#ccc;position:relative;display:inline-block;line-height:1.5em;margin-left:1em;height:1.7em;vertical-align:middle;width:0}.bar:hover{opacity:0.8}.bar span{position:absolute;right:0;padding:0.6em;line-height:1em}.bar-left span{right:inherit;left:100%}.activeBar .bar span{color:white;pointer-events:none}.activeBar .bar-left span{color:#484848}.graphBarsExp .activeBar .bar{background:#d35d33}.graphBarsImp .activeBar .bar{background:#126567}#frases li{list-style:none;padding:0.8em 50px 0.8em 0.8em;background:white;margin:0 0.4em 0.8em 0.4em;position:relative;cursor:pointer}#frases li:hover{text-decoration:underline}#frases li i{position:absolute;right:0;bottom:0;padding:0.4em;font-size:1.6em;color:#00aced;text-decoration:none!important}.autocomplete-suggestions{padding:1em;line-height:1.2em;background:#ccc;cursor:pointer;color:#666;font-weight:900}.autocomplete-suggestion{text-decoration:underline;line-height:1.6em}.autocomplete-suggestion:hover{color:#333}#plantiGraph .btn-cacao.act{background:#529fbc}#plantiGraph .btn-banana.act{background:#e0e233}#plantiGraph .btn-azucar.act{background:#96cb51}#plantiGraph .btn-aceite.act{background:#d3a016}#plantiGraph .btn-cafe.act{background:#b51629}.tooltip.top .tooltip-arrow{border-top-color:background-color: rgba(0,0,0,0.8)}.tooltip-inner{background-color:rgba(0,0,0,0.8)}</style><div id="plantiGraph"><h1>Comercio internacional</h1><div id="head" class="clearfix"><div id="type"><h4>¿Qué datos quieres mostrar?</h4><p>Filtra por datos de exportación o importación</p><a href="#" data-type="imp" id="typeImp" class="btn">Importaciones</a> <a href="#" data-type="exp" id="typeExp" class="btn">Exportaciones</a></div><div id="prods"><h4>¿Por qué producto quieres filtrar?</h4><p>Selecciona una opción</p><a href="#" data-prod="cacao" class="btn btn-cacao"><img src="http://estaticos.lab.eldiario.es/estaticos/plantaciones/icons/chocolate.svg"><span>Cacao</span></a> <a href="#" data-prod="banana" class="btn btn-banana"><img src="http://estaticos.lab.eldiario.es/estaticos/plantaciones/icons/banana.svg"><span>Banano</span></a> <a href="#" data-prod="azucar" class="btn btn-azucar"><img src="http://estaticos.lab.eldiario.es/estaticos/plantaciones/icons/sugar.svg"><span>Azúcar</span></a> <a href="#" data-prod="aceite" class="btn btn-aceite"><img src="http://estaticos.lab.eldiario.es/estaticos/plantaciones/icons/palm_oil.svg"><span>Aceite de palma</span></a> <a href="#" data-prod="cafe" class="btn btn-cafe"><img src="http://estaticos.lab.eldiario.es/estaticos/plantaciones/icons/coffee.svg"><span>Café</span></a></div><div id="years"><h4>Año</h4><p>Selecciona un año</p><div id="yearsSel"> <a href="#" class="prevYear"><i class="fa fa-angle-left" aria-hidden="true"></i></a><div id="activeYear"></div> <a href="#" class="nextYear disabled"><i class="fa fa-angle-right" aria-hidden="true"></i></a></div></div></div><div id="graph"> <svg id="viz" class="blur"> <defs><filter id="blur"><feGaussianBlur in="SourceGraphic" stdDeviation="0"></feGaussianBlur></filter></defs> <linearGradient id="linearGradient"> <stop offset="0%" stop-color="#126567"/><stop offset="100%" stop-color="#d35d33"/> </linearGradient> <linearGradient id="linearGradientInverse"> <stop offset="0%" stop-color="#d35d33"/><stop offset="100%" stop-color="#126567"/> </linearGradient> </svg><div id="closePop"> < Volver a la visualización Global</div><div id="pop"><div id="search"> <i class="fa fa-search" aria-hidden="true"></i> <input placeholder="Busca un país" type="text" id="countryImput" class="form-control"><p id="searchHelp" style="width: 260px;"><strong>Selecciona un pais</strong> o <strong>búscalo</strong> para conocer sus datos de comercio de plantaciones.</p><p id="searchSelected"></p><div id="searchResults"></div></div><div id="popWrap"><div id="frases"></div><div id="graphLines"><div class="inn"><svg></svg></div></div><div id="graphBars1"><div class="inn"></div></div><div id="graphBars2"><div class="inn"></div></div></div></div></div></div> <script>function throttle(a,b){var c=!1;return function(){c||(c=!0,setTimeout(function(){a.call(),c=!1},b))}}function numberThousandsDots(a){return a.toString().replace(/(d)(?=(ddd)+(?!d))/g,"$1.")}function firstCapital(a){return a.charAt(0).toUpperCase()+a.slice(1)}function millionsParser(a){var b=a/1e6;return b>1?numberThousandsDots(parseInt(b,10)):b.toFixed(2).replace(".",",")}function shareTweet(a,b,c,d){function m(a){return a.indexOf("#")!=-1&&(a=a.substring(0,a.indexOf("#"))),a.indexOf("?")!=-1&&(a=a.substring(0,a.indexOf("?"))),a}if(!a)return!1;var e="scrollbars=yes,resizable=yes,toolbar=no,location=yes",f=550,g=420,h=screen.height,i=screen.width,j=Math.round(i/2-f/2),k=0;h>g&&(k=Math.round(h/2-g/2));var l="https://twitter.com/intent/tweet?text="+encodeURIComponent(a);b&&b!==!1?l+="&url="+m(b):b!==!1&&(l+="&url="+encodeURIComponent(window.location.href)),c&&(l+="&hashtags="+encodeURIComponent(c)),d&&(l+="&via="+encodeURIComponent(d)),window.open(l,"intent",e+",width="+f+",height="+g+",left="+j+",top="+k)}var plantiGraph={pathData:"http://estaticos.lab.eldiario.es/estaticos/plantaciones/",pathPaises:"paisesTot.json",pathQuery:"?mls3",act:{year:2014,prod:"cafe",type:["imp","exp"]},breakPoint:800,breakPointClass:"fullGraph",breakPointSmallScreen:null,maxCircProp:25,maxCirc:null,maxLineProp:70,maxLine:null,minLineProp:10,minLine:null,minCircProp:15,minCirc:null,maxWidthText:13,maxWidthTextMovil:11,textYOffsetMovil:3,textYOffset:5,initYear:1995,lastYear:2014,graphsElms:5,viz:{width:0,height:0,$wrap:"#plantiGraph",$elm:"#viz",svg:null,projection:null,path:null,map:null,circImp:null,circExp:null,texts:null,force:null,scale:{circImp:null,circExp:null,circImpExp:null,lines:null}},data:{countries:null,yearTopExp:null,yearTopImp:null,totalExp:null,totalImp:null},txt:{articulos:{cafe:"el café",aceite:"el aceite de palma",cacao:"el cacao",banana:"el banano",azucar:"el azúcar"},productos:{cafe:"café",aceite:"aceite de palma",cacao:"cacao",banana:"banano",azucar:"azúcar"}},init:function(){plantiGraph.viz.svg=d3.select(plantiGraph.viz.$elm),plantiGraph.viz.$elm=$(plantiGraph.viz.$elm),plantiGraph.viz.$wrap=$(plantiGraph.viz.$wrap),plantiGraph.countryPop.init(),plantiGraph.tools.initJqueries(),$(window).bind("orientationchange resize",throttle(plantiGraph.tools.handleResize,300)).resize()},tools:{handleResize:function(){plantiGraph.tools.loadCountries(),plantiGraph.tools.updateProjection(),plantiGraph.tools.update()},updateProjection:function(){if(plantiGraph.viz.width=$(window).width(),plantiGraph.viz.height=plantiGraph.viz.width/2,plantiGraph.viz.width<plantiGraph.breakPoint?($("#blur").remove(),plantiGraph.viz.height=plantiGraph.viz.width/1.4,plantiGraph.viz.$wrap.removeClass(plantiGraph.breakPointClass),plantiGraph.breakPointSmallScreen=!0):(plantiGraph.viz.$wrap.addClass(plantiGraph.breakPointClass),plantiGraph.viz.width=plantiGraph.viz.width-300,plantiGraph.viz.height=plantiGraph.viz.width/2,plantiGraph.breakPointSmallScreen=!1),plantiGraph.viz.$elm.css({width:plantiGraph.viz.width,height:plantiGraph.viz.height}),plantiGraph.viz.projection=d3.geoMercator().scale(170*(plantiGraph.viz.width/1e3)).translate([plantiGraph.viz.width/2-plantiGraph.viz.width/14,plantiGraph.viz.height/2+plantiGraph.viz.height/5]).precision(51),plantiGraph.viz.path=d3.geoPath().projection(plantiGraph.viz.projection),plantiGraph.data.prod)for(var a=0;a<plantiGraph.data.prod.length;a++)plantiGraph.data.prod[a].x=plantiGraph.viz.projection([plantiGraph.data.prod[a].lon,plantiGraph.data.prod[a].lat])[0],plantiGraph.data.prod[a].y=plantiGraph.viz.projection([plantiGraph.data.prod[a].lon,plantiGraph.data.prod[a].lat])[1];plantiGraph.maxCirc=parseInt(plantiGraph.viz.width/plantiGraph.maxCircProp,10),plantiGraph.minCirc=Math.ceil(plantiGraph.maxCirc/plantiGraph.minCircProp),plantiGraph.maxLine=parseInt(plantiGraph.viz.width/plantiGraph.maxLineProp,10),plantiGraph.minLine=plantiGraph.maxLine/plantiGraph.minLineProp},loadCountries:function(a){d3.json(plantiGraph.pathData+plantiGraph.pathPaises+plantiGraph.pathQuery,function(b,c){if(b)throw b;var d=[],e=[];for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];g.key=f,g.posX=plantiGraph.viz.projection([g.lon,g.lat])[0],g.posY=plantiGraph.viz.projection([g.lon,g.lat])[1],g.x=g.posX,g.y=g.posY,d.push(g),g.x&&g.y&&e.push({value:g.name,data:{id:g.name,key:g.key}})}$("#countryImput").autocomplete({lookup:e,minChars:3,orientation:"bottom",autoSelectFirst:!0,showNoSuggestionNotice:!0,noSuggestionNotice:"No se encontraron coincidencias",groupBy:"p",onSelect:function(a){plantiGraph.countryPop.activa(a.data.key)}}),plantiGraph.data.countries=d,a&&a()})},update:function(){d3.json(plantiGraph.pathData+plantiGraph.act.prod+".json"+plantiGraph.pathQuery,function(a,b){if(a)throw a;plantiGraph.data.countries||plantiGraph.tools.loadCountries(function(){plantiGraph.tools.processData(b)}),plantiGraph.tools.processData(b),plantiGraph.countryPop.update()})},getCountry:function(a){for(var b=0;b<plantiGraph.data.countries.length;b++)if(plantiGraph.data.countries[b].key==a)return plantiGraph.data.countries[b];return!1},getdataCountry:function(a){d3.json(plantiGraph.pathData+plantiGraph.act.prod+".json"+plantiGraph.pathQuery,function(b,c){function i(a){for(var b=[],c=0;c<a.length;c++)b.push({data:{name:plantiGraph.tools.getCountry(a[c].key).name,key:a[c].key,val:a[c].val},pos:c});return b}if(b)throw b;var d={actCountry:null,expByYear:[],impByYear:[]};if(1==plantiGraph.act.type.length){if(plantiGraph.act.type.indexOf("exp")!=-1){var e=[];for(var f in c[plantiGraph.act.year][a])c[plantiGraph.act.year][a].hasOwnProperty(f)&&e.push({key:f,val:c[plantiGraph.act.year][a][f]});e.sort(function(a,b){return d3.descending(a.val,b.val)}),d.exports=i(e.slice(0,5))}if(plantiGraph.act.type.indexOf("imp")!=-1){var g=[];for(var h in c[plantiGraph.act.year])c[plantiGraph.act.year].hasOwnProperty(h)&&c[plantiGraph.act.year][h][a]&&g.push({key:h,val:c[plantiGraph.act.year][h][a]});g.sort(function(a,b){return d3.descending(a.val,b.val)}),d.imports=i(g.slice(0,5))}}for(var j=plantiGraph.data.countries.length-1;j>=0;j--)plantiGraph.data.countries[j].key==a&&(d.actCountry=plantiGraph.data.countries[j]);if(!d.actCountry)throw"No se encontró el pais activo";for(var k=plantiGraph.initYear;k<=plantiGraph.lastYear;k++){d.expByYear[k]=0,d.impByYear[k]=0;for(var j=plantiGraph.data.countries.length-1;j>=0;j--)if(plantiGraph.data.countries[j].key==a)for(var l=plantiGraph.data.countries.length-1;l>=0;l--)c[k][a]&&c[k][a][plantiGraph.data.countries[l].key]&&(d.impByYear[k]+=c[k][a][plantiGraph.data.countries[l].key]);else c[k][plantiGraph.data.countries[j].key]&&c[k][plantiGraph.data.countries[j].key][a]&&(d.expByYear[k]+=c[k][plantiGraph.data.countries[j].key][a])}plantiGraph.countryPop.draw(d)})},getTop:function(a,b){for(var c=[],d="imp"==b?plantiGraph.data.yearTopImp:plantiGraph.data.yearTopExp,e=!1,f=0;f<plantiGraph.graphsElms;f++)d[f].key==a&&(e=!0),c.push({data:d[f],pos:f});if(e)return c;for(var f=d.length-1;f>=0;f--)if(d[f].key==a)return c.push({data:d[f],pos:f}),c},getFrases:function(a){var b=a.actCountry.name,c=[];if(2==plantiGraph.act.type.length){var d=a.actCountry.totalExp-a.actCountry.totalImp,e=plantiGraph.tools.getPosition(a,"imp"),f=plantiGraph.tools.getPosition(a,"exp");d>0?c.push("<strong>"+b+"</strong> exportó <strong>"+plantiGraph.tools.parseAmmount(d)+" más</strong> en <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong> de los que importó."):c.push("<strong>"+b+"</strong> importó <strong>"+plantiGraph.tools.parseAmmount(-1*d)+" más</strong> en <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong> de los que exportó."),c.push("<strong>"+b+"</strong> ocupa el puesto número <strong>"+f+"</strong> de países exportadores y el puesto número <strong>"+e+"</strong> de paises importadores de <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong>.")}else if(plantiGraph.act.type.indexOf("imp")!=-1){var g=plantiGraph.tools.fixPosition(plantiGraph.tools.getPosition(a,"imp")),h=100*a.actCountry.totalImp/plantiGraph.data.totalImp,i=100*a.actCountry.totalImp/a.actCountry.resumen.imps[plantiGraph.act.year];c.push("<strong>"+b+"</strong> ocupa el <strong>"+g+" puesto</strong> en el ranking de países importadores de <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong>."),c.push("<strong>"+b+"</strong> controla el <strong>"+h.toFixed(1).replace(".",",")+"%</strong> de las importaciones mundiales de <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong>."),c.push("<strong>"+firstCapital(plantiGraph.txt.articulos[plantiGraph.act.prod])+"</strong> supone el "+i.toFixed(1).replace(".",",")+"% de las importaciones de <strong>"+b+"</strong>, "+plantiGraph.tools.parseAmmount(a.actCountry.totalImp)+"</strong>.")}else{var j=plantiGraph.tools.fixPosition(plantiGraph.tools.getPosition(a,"exp")),k=100*a.actCountry.totalExp/plantiGraph.data.totalExp,l=100*a.actCountry.totalExp/a.actCountry.resumen.exps[plantiGraph.act.year];c.push("<strong>"+b+"</strong> ocupa el <strong>"+j+" puesto</strong> en el ranking de países exportadores de <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong>."),c.push("<strong>"+b+"</strong> controla el <strong>"+k.toFixed(1).replace(".",",")+"%</strong> de las exportaciones mundiales de <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong>."),c.push("<strong>"+firstCapital(plantiGraph.txt.articulos[plantiGraph.act.prod])+"</strong> supone el "+l.toFixed(1).replace(".",",")+"% de las exportaciones de <strong>"+b+"</strong>, "+plantiGraph.tools.parseAmmount(a.actCountry.totalExp)+".")}return c},parseAmmount:function(a){return a/1e6>1?numberThousandsDots(Math.round(a/1e6))+" millones de dólares":numberThousandsDots(a)+" dólares"},fixPosition:function(a){switch(a){case 1:return"primer";case 2:return"segundo";case 3:return"tercer";default:return a+"º"}},getPosition:function(a,b){if("imp"==b){for(var c=plantiGraph.data.yearTopImp.length-1;c>=0;c--)if(plantiGraph.data.yearTopImp[c].key==a.actCountry.key)return c+1}else for(var c=plantiGraph.data.yearTopExp.length-1;c>=0;c--)if(plantiGraph.data.yearTopExp[c].key==a.actCountry.key)return c+1;return null},processData:function(a){for(var b=plantiGraph.data.countries,c=a[plantiGraph.act.year],d=[],e=[],f={exp:[],imp:[]},g=b.length-1;g>=0;g--)b[g].totalImp=0,b[g].totalExp=0;for(var h=[],i=0,g=b.length-1;g>=0;g--)if(c[b[g].key])for(var j=b.length-1;j>=0;j--)if(c[b[g].key][b[j].key]){var k=c[b[g].key][b[j].key];b[g].totalExp+=k,b[j].totalImp+=k,h.push(k),k>i&&(i=k),e.push({source:b[g],target:b[j],val:k})}for(var g=0;g<e.length;g++)e[g].val>i/1e3&&d.push(e[g]);plantiGraph.data.totalExp=0,plantiGraph.data.totalImp=0;for(var g=b.length-1;g>=0;g--)plantiGraph.data.totalExp+=b[g].totalExp,plantiGraph.data.totalImp+=b[g].totalImp,f.imp.push({key:b[g].key,val:b[g].totalImp,name:b[g].name}),f.exp.push({key:b[g].key,val:b[g].totalExp,name:b[g].name});for(var l=[],m=[],n=[],g=b.length-1;g>=0;g--)b[g].totalImp>0&&l.push(b[g].totalImp),b[g].totalExp>0&&m.push(b[g].totalExp),b[g].totalImp+b[g].totalExp>0&&n.push(b[g].totalImp+b[g].totalExp);plantiGraph.data.yearTopExp=f.exp.sort(function(a,b){return d3.descending(a.val,b.val)}),plantiGraph.data.yearTopImp=f.imp.sort(function(a,b){return d3.descending(a.val,b.val)}),plantiGraph.viz.scale.circImp=d3.scalePow().exponent(.5).domain([0,d3.max(l)]).range([0,plantiGraph.maxCirc]),plantiGraph.viz.scale.circExp=d3.scalePow().exponent(.5).domain([0,d3.max(m)]).range([0,plantiGraph.maxCirc]),plantiGraph.viz.scale.circImpExp=d3.scalePow().exponent(.5).domain([0,d3.max(n)]).range([0,plantiGraph.maxCirc]),plantiGraph.viz.scale.lines=d3.scalePow().exponent(.9).domain([0,d3.max(h)]).range([0,plantiGraph.maxLine]);for(var g=b.length-1;g>=0;g--)b[g].rTot=plantiGraph.viz.scale.circImpExp(b[g].totalImp+b[g].totalExp),b[g].rTotImp=plantiGraph.viz.scale.circImpExp(b[g].totalImp),b[g].rTotExp=plantiGraph.viz.scale.circImpExp(b[g].totalExp),b[g].rImp=plantiGraph.viz.scale.circImp(b[g].totalImp),b[g].rExp=plantiGraph.viz.scale.circExp(b[g].totalExp);plantiGraph.viz.circsImp?(plantiGraph.viz.links.remove(),plantiGraph.viz.links=plantiGraph.viz.svg.select(".linksWrap").selectAll(".link").data(d).enter().append("line").attr("class",plantiGraph.evs.linksClass).attr("stroke-width",function(a){return plantiGraph.viz.scale.lines(a.val)}).on("mouseenter",plantiGraph.evs.linksEnter).on("mouseout",plantiGraph.evs.circOut)):(plantiGraph.viz.links=plantiGraph.viz.svg.append("g").attr("class","linksWrap").selectAll(".link").data(d).enter().append("line").attr("class",plantiGraph.evs.linksClass).attr("stroke-width",function(a){return plantiGraph.viz.scale.lines(a.val)}).on("mouseenter",plantiGraph.evs.linksEnter).on("mouseout",plantiGraph.evs.circOut),plantiGraph.viz.circExp=plantiGraph.viz.svg.append("g").attr("class","circExpWrap").selectAll(".circExp").data(b).enter().append("circle").attr("class","circExp").on("mouseenter",plantiGraph.evs.circExpEnter).on("mousedown",plantiGraph.evs.circClick).on("mouseout",plantiGraph.evs.circOut),plantiGraph.viz.circsImp=plantiGraph.viz.svg.append("g").attr("class","circImpWrap").selectAll(".circImp").data(b).enter().append("circle").attr("class","circImp").on("mouseenter",plantiGraph.evs.circInEnter).on("mousedown",plantiGraph.evs.circClick).on("mouseout",plantiGraph.evs.circOut),plantiGraph.viz.texts=plantiGraph.viz.svg.append("g").attr("class","textsWrap").selectAll(".text").data(b).enter().append("text").attr("class","text").text(function(a){return a.key.toUpperCase()})),plantiGraph.viz.links.data(d).attr("stroke-width",function(a){return plantiGraph.viz.scale.lines(a.val)}).attr("class",plantiGraph.evs.linksClass).attr("visibility",plantiGraph.evs.linksVisibilityCheck).attr("opacity",0).transition().duration(500).attr("opacity",1),plantiGraph.viz.circsImp.data(b).attr("visibility",plantiGraph.evs.circImpVisibilityCheck).attr("r",plantiGraph.evs.circImpRadius).attr("cx",function(a){if(a.posX)return a.x}).attr("cy",function(a){if(a.posY)return a.y}),plantiGraph.viz.circExp.data(b).attr("visibility",plantiGraph.evs.circExpVisibilityCheck).attr("r",plantiGraph.evs.circExpRadius).attr("cx",function(a){if(a.posX)return a.x}).attr("cy",function(a){if(a.posY)return a.y}),plantiGraph.viz.texts.data(b).attr("visibility",plantiGraph.evs.textVisibilityCheck).attr("x",function(a){if(a.posX)return a.x}).attr("y",function(a){if(a.posY)return a.y+(plantiGraph.breakPointSmallScreen?3:5)}),plantiGraph.viz.force=d3.forceSimulation(b).force("link",d3.forceLink(d).strength(1e-13)).force("collide",d3.forceCollide().radius(plantiGraph.evs.collideRadiusFn).iterations(6).strength(1.2)).alphaDecay(plantiGraph.breakPointSmallScreen?.8:.6).velocityDecay(.7).on("tick",plantiGraph.tools.tick)},tick:function(){plantiGraph.viz.circsImp.attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y}),plantiGraph.viz.circExp.attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y}),plantiGraph.viz.links.attr("x1",function(a){return a.source.x}).attr("x2",function(a){return a.target.x}).attr("y1",function(a){return a.source.y}).attr("y2",function(a){return a.target.y}).attr("class",plantiGraph.evs.linksClass).attr("visibility",plantiGraph.evs.linksVisibilityCheck),plantiGraph.viz.texts.attr("x",function(a){return a.x}).attr("y",function(a){return a.y+(plantiGraph.breakPointSmallScreen?plantiGraph.textYOffset:plantiGraph.textYOffset)})},initJqueries:function(){$("#years").find(".gotoYear").click(plantiGraph.evs.changeYear).end().find(".nextYear").click(plantiGraph.evs.nextYear).end().find(".prevYear").click(plantiGraph.evs.prevYear),$("#prods a").click(plantiGraph.evs.changeProduct),$("#type a").click(plantiGraph.evs.changeType),$("#activeYear").html(plantiGraph.act.year),$("#prods a[data-prod="+plantiGraph.act.prod+"]").addClass("act"),$(plantiGraph.act.type).each(function(a,b){$("#type a[data-type="+b+"]").addClass("act")}),$("body").delegate("#frases li","click",function(){return shareTweet($(this).text().slice(0,-1)+" en "+plantiGraph.act.year,"http://www.eldiario.es/","pruebaHash","eldiarioes"),!1}).delegate("#searchSelected a","click",function(){return plantiGraph.countryPop.hide(),!1})}},countryPop:{active:!1,$elm:"#pop",$frases:"#frases",$graphLines:"#graphLines",$graphBars1:"#graphBars1",$graphBars2:"#graphBars2",init:function(){plantiGraph.countryPop.$elm=$(plantiGraph.countryPop.$elm),plantiGraph.countryPop.$frases=$(plantiGraph.countryPop.$frases),plantiGraph.countryPop.$graphLines=$(plantiGraph.countryPop.$graphLines).find(".inn"),plantiGraph.countryPop.$graphBars1=$(plantiGraph.countryPop.$graphBars1).find(".inn"),plantiGraph.countryPop.$graphBars2=$(plantiGraph.countryPop.$graphBars2).find(".inn"),$("#closePop").click(plantiGraph.countryPop.hide),plantiGraph.viz.$wrap.delegate(".activaCountry","click",function(a){a.preventDefault();var b=$(this),c=b.data("country");if(!c)throw"No se encontró el pais clickado";plantiGraph.countryPop.activa(c)}).delegate(".activaYear","click",function(a){a.preventDefault();var b=$(this),c=b.data("year");if(!c)throw"No se encontró el año clickado";plantiGraph.evs.gotoYear(c)})},activa:function(a){plantiGraph.countryPop.clear();plantiGraph.tools.getdataCountry(a);plantiGraph.countryPop.active=a,$("#searchHelp").hide(),plantiGraph.viz.$wrap.addClass("actPop"),plantiGraph.breakPointSmallScreen||(setTimeout(function(){plantiGraph.countryPop.activaHover(a)},100),d3.selectAll("feGaussianBlur").transition().attr("stdDeviation",4))},activaHover:function(a){for(var b=0;b<plantiGraph.data.countries.length;b++)if(plantiGraph.data.countries[b].key==a)return void plantiGraph.evs.circsHover(plantiGraph.data.countries[b])},hide:function(){plantiGraph.countryPop.active=null,plantiGraph.viz.$wrap.removeClass("actPop"),plantiGraph.countryPop.clear(),plantiGraph.breakPointSmallScreen||(d3.selectAll("feGaussianBlur").transition().attr("stdDeviation",0),plantiGraph.evs.circOut())},clear:function(){plantiGraph.countryPop.active=null,plantiGraph.countryPop.$frases.find("*").remove(),plantiGraph.countryPop.$graphBars2.find("*").remove(),plantiGraph.countryPop.$graphBars1.find("*").remove(),plantiGraph.countryPop.$graphLines.find("*").remove(),plantiGraph.countryPop.$graphLines.append("<svg></svg>"),$("#searchHelp").show(),$("#searchSelected").hide().html("")},update:function(){plantiGraph.countryPop.active&&plantiGraph.countryPop.activa(plantiGraph.countryPop.active)},draw:function(a){var b=plantiGraph.tools.getFrases(a);$.each(b,function(a,b){plantiGraph.countryPop.$frases.append($("<li>"+b+'<i class="fa fa-twitter" aria-hidden="true"></i></li>'))}),$("#searchSelected").show().html('<a href="#" class="clearPop">'+a.actCountry.name+"</a>"),plantiGraph.breakPointSmallScreen||(plantiGraph.countryPop.drawEvol(plantiGraph.countryPop.$graphLines,a),2==plantiGraph.act.type.length?(plantiGraph.countryPop.drawBarras(plantiGraph.tools.getTop(a.actCountry.key,"exp"),a,plantiGraph.countryPop.$graphBars1,"exp"),plantiGraph.countryPop.drawBarras(plantiGraph.tools.getTop(a.actCountry.key,"imp"),a,plantiGraph.countryPop.$graphBars2,"imp")):$.inArray("imp",plantiGraph.act.type)==-1?(plantiGraph.countryPop.drawBarras(plantiGraph.tools.getTop(a.actCountry.key,"exp"),a,plantiGraph.countryPop.$graphBars1,"exp"),plantiGraph.countryPop.drawBarras(a.exports,a,plantiGraph.countryPop.$graphBars2,"expInternal")):(plantiGraph.countryPop.drawBarras(plantiGraph.tools.getTop(a.actCountry.key,"imp"),a,plantiGraph.countryPop.$graphBars1,"imp"),plantiGraph.countryPop.drawBarras(a.imports,a,plantiGraph.countryPop.$graphBars2,"impInternal")))},drawBarras:function(a,b,c,d){switch(d){case"exp":c.addClass("graphBarsExp").append('<h4 style="text-transform: uppercase">Ranking de países <br>exportadores</h4><p style="margin-bottom: 0.8em">En millones de dolares</p>');break;case"imp":c.addClass("graphBarsImp").append('<h4 style="text-transform: uppercase">Ranking de países <br>importadores</h4><p style="margin-bottom: 0.8em">En millones de dolares</p>');break;case"expInternal":c.addClass("graphBarsImp").append('<h4 style="text-transform: uppercase">Principales paises<br>a los que exporta</h4><p style="margin-bottom: 0.8em">En millones de dolares</p>');break;case"impInternal":c.addClass("graphBarsImp").append('<h4 style="text-transform: uppercase">Principales paises<br>de los que importa</h4><p style="margin-bottom: 0.8em">En millones de dolares</p>')}var e=d3.max(a,function(a){return a.data.val});$.each(a,function(a,f){a==plantiGraph.graphsElms&&plantiGraph.countryPop.$graphBars1.append("<li>....</li>");var g=null;g="exp"==d||"imp"==d?$('<li><a data-toggle="tooltip" href="#" class="activaCountry'+(f.data.key==b.actCountry.key?" activeBar":"")+'" data-country="'+f.data.key+'"><span class="key">'+f.data.key+'</span><div class="bar" title="'+f.data.name+("imp"==d?" importó ":" exportó ")+plantiGraph.tools.parseAmmount(f.data.val)+" de "+plantiGraph.txt.productos[plantiGraph.act.prod]+" en "+plantiGraph.act.year+'" data-width=""><span class="text">'+millionsParser(f.data.val)+"</span></div></a></li>"):$('<li><a data-toggle="tooltip" href="#" class="activaCountry'+(f.data.key==b.actCountry.key?" activeBar":"")+'" data-country="'+f.data.key+'"><span class="key">'+f.data.key+'</span><div class="bar" title="'+b.actCountry.name+("impInternal"==d?" importó ":" exportó ")+plantiGraph.tools.parseAmmount(f.data.val)+" de "+plantiGraph.txt.productos[plantiGraph.act.prod]+("impInternal"==d?" de ":" a ")+f.data.name+" en "+plantiGraph.act.year+'" data-width=""><span class="text">'+millionsParser(f.data.val)+"</span></div></a></li>"),c.append(g);var h=100*f.data.val/e;g.find(".bar").tooltip(),g.find(".bar").stop(!1,!1).css("width",0).animate({width:h},1e3),h<40&&g.find(".bar").addClass("bar-left")})},drawEvol:function(a,b){a.prepend('<h4 style="text-transform: uppercase">Evolución importaciones y exportaciones de '+plantiGraph.txt.productos[plantiGraph.act.prod]+'</h4><p style="margin-bottom: 0.8em">En millones de dolares</p>');var c=d3.max([d3.max(d3.entries(b.expByYear),function(a){return parseInt(a.value,10)}),d3.max(d3.entries(b.impByYear),function(a){return parseInt(a.value,10)})]),d=30,e=5,f=210,g=.6*f,h=d3.scaleLinear().domain([0,c]).range([g,0]),i=d3.axisLeft(h).ticks(4).tickSize(0).tickFormat(function(a){return parseInt(a/1e6,10)}),j=plantiGraph.lastYear-plantiGraph.initYear,k=(f-d)/j,l="M"+d+" "+(g+e)+" L",m="M",n="M"+d+" "+(g+e)+" L",o="M",p="M"+d+" "+(g+e)+" L",q="M",r=d3.select(a.find("svg")[0]).attr("width",f+3).attr("height",g+2*e);r.append("g").attr("transform","translate("+(d-5)+" ,"+e+")").attr("class","axes").call(i);for(var s=r.append("g").attr("class","lines"),t=r.append("g").attr("class","dots"),u=0;u<=j;u++){var v=d+k*u,w=e+h(b.expByYear[plantiGraph.initYear+u]),x=e+h(b.impByYear[plantiGraph.initYear+u]);l+=v+" "+(g+e)+" L",m+=v+" "+(g+e)+" L",n+=v+" "+x+" L",o+=v+" "+x+" L",p+=v+" "+w+" L",q+=v+" "+w+" L",t.append("circle").attr("class","circLinesWhite").attr("cx",v).attr("cy",w).attr("r",4).attr("opacity",0).transition().duration(2e3).attr("opacity",1),t.append("circle").on("mouseenter",plantiGraph.evs.circGraphTooltip).on("mouseout",plantiGraph.evs.circGraphTooltipOut).attr("class","circLines linesExp activaYear"+(plantiGraph.initYear+u==plantiGraph.act.year?" linesExpFill":"")).attr("data-year",plantiGraph.initYear+u).attr("cx",v).attr("cy",w).attr("r",3).attr("stroke","#126567").attr("title",b.actCountry.name+" importó "+plantiGraph.tools.parseAmmount(b.expByYear[plantiGraph.initYear+u])+" de "+plantiGraph.txt.productos[plantiGraph.act.prod]+" en "+(plantiGraph.initYear+u)+".").attr("opacity",0).transition().duration(2e3).attr("opacity",1),t.append("circle").attr("class","circLinesWhite").attr("cx",v).attr("cy",x).attr("r",4).attr("opacity",0).transition().duration(2e3).attr("opacity",1),t.append("circle").on("mouseenter",plantiGraph.evs.circGraphTooltip).on("mouseout",plantiGraph.evs.circGraphTooltipOut).attr("class","circLines linesImp activaYear"+(plantiGraph.initYear+u==plantiGraph.act.year?" linesImpFill":"")).attr("data-year",plantiGraph.initYear+u).attr("cx",v).attr("cy",x).attr("r",3).attr("title",b.actCountry.name+" exportó "+plantiGraph.tools.parseAmmount(b.impByYear[plantiGraph.initYear+u])+" de "+plantiGraph.txt.productos[plantiGraph.act.prod]+" en "+(plantiGraph.initYear+u)+".").attr("opacity",0).transition().duration(2e3).attr("opacity",1)}l+=d+f+" "+(g+e)+" L"+d+" 0 Z",n+=d+f+" "+(g+e)+" Z",p+=d+f+" "+(g+e)+" Z",s.append("path").attr("d",l).attr("stroke","none").attr("fill","rgba(211, 93, 51, 0.1)").transition().duration(1e3).attr("d",n),s.append("path").attr("d",l).attr("stroke","none").attr("fill","rgba(150, 203, 81, 0.1)").transition().duration(1e3).attr("d",p),s.append("path").attr("d",m.slice(0,-1)).attr("stroke","rgb(211, 93, 51)").attr("stroke-width","1").attr("fill","none").transition().duration(1e3).attr("d",o.slice(0,-1)),s.append("path").attr("d",m.slice(0,-1)).attr("stroke","#126567").attr("stroke-width","1").attr("fill","none").transition().duration(1e3).attr("d",q.slice(0,-1))}},evs:{circGraphTooltipOut:function(){$("#pop .tooltip").remove()},circGraphTooltip:function(a,b){var c=$(this),d=$("#pop"),e=c.offset().left-d.offset().left,f=d.height()-(c.offset().top-d.offset().top),g=$('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+c.attr("title")+"</div></div>");g.css({bottom:f,left:e-98}),d.append(g),g.animate({opacity:1},400)},circTooltip:function(a){var b=a.y,c=a.x-100,d="";2==plantiGraph.act.type.length?(d="<strong>"+a.name+"</strong> exportó "+plantiGraph.tools.parseAmmount(a.totalExp)+" e importó "+plantiGraph.tools.parseAmmount(a.totalImp)+" de <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong> en "+plantiGraph.act.year,b-=a.rTot+4):plantiGraph.act.type.indexOf("exp")!=-1?(d="<strong>"+a.name+"</strong> exportó "+plantiGraph.tools.parseAmmount(a.totalExp)+" de <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong> en "+plantiGraph.act.year,b-=a.rExp+4):(d="<strong>"+a.name+"</strong> importó "+plantiGraph.tools.parseAmmount(a.totalImp)+" de <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong> en "+plantiGraph.act.year,b-=a.rImp+4),b=$("#graph").height()-b;var e=$('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+d+"</div></div>");e.css({bottom:b,left:c}).appendTo("#graph"),e.animate({opacity:1},400)},linksClass:function(a){return a.source.x>a.target.x?"link":"link link-left"},linksEnter:function(a){return!plantiGraph.breakPointSmallScreen&&(plantiGraph.evs.linesHover(a),void plantiGraph.evs.linesTooltip(a))},linesHover:function(a){$("#graph").addClass("hover"),plantiGraph.viz.links.attr("class",function(b){var c=b.source.x>b.target.x?"link":"link link-left";return b==a?c+" linkAct":c}),plantiGraph.viz.circExp.attr("class",function(b){return a.target==b||a.source==b?"circExp circExpAct":"circExp"}),plantiGraph.viz.circsImp.attr("class",function(b){return a.target==b||a.source==b?"circImp circImpAct":"circImp"})},linesTooltip:function(a){var b=(a.source.x+a.target.x)/2-100,c=(a.source.y+a.target.y)/2-5,d="<strong>"+a.source.name+"</strong> exportó "+plantiGraph.tools.parseAmmount(a.val)+" de <strong>"+plantiGraph.txt.productos[plantiGraph.act.prod]+"</strong> a <strong>"+a.target.name+"</strong> en "+plantiGraph.act.year;c=$("#graph").height()-c;var e=$('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+d+"</div></div>");e.css({bottom:c,left:b}).appendTo("#graph"),e.animate({opacity:1},400)},circsHover:function(a){$("#graph").addClass("hover"),plantiGraph.viz.circExp.attr("class",function(b){if(b.key==a.key)return"circExp circExpAct";var c=!1;return plantiGraph.viz.links.each(function(d){d.source.key==a.key&&d.target.key==b.key&&plantiGraph.viz.scale.lines(d.val)>plantiGraph.minLine&&(c=!0),d.source.key==b.key&&d.target.key==a.key&&plantiGraph.viz.scale.lines(d.val)>plantiGraph.minLine&&(c=!0)}),c?"circExp circExpAct":"circExp"}),plantiGraph.viz.circsImp.attr("class",function(b){if(b.key==a.key)return"circImp circImpAct";var c=!1;return plantiGraph.viz.links.each(function(d){d.source.key==a.key&&d.target.key==b.key&&plantiGraph.viz.scale.lines(d.val)>plantiGraph.minLine&&(c=!0),d.source.key==b.key&&d.target.key==a.key&&plantiGraph.viz.scale.lines(d.val)>plantiGraph.minLine&&(c=!0)}),c?"circImp circImpAct":"circImp"}),plantiGraph.viz.links.attr("class",function(b){var c=b.source.x>b.target.x?"link":"link link-left";return b.source.key==a.key||b.target.key==a.key?c+" linkAct":c})},circExpEnter:function(a){return $("#graph .tooltip").remove(),!plantiGraph.breakPointSmallScreen&&(plantiGraph.evs.circsHover(a),void plantiGraph.evs.circTooltip(a))},circInEnter:function(a){plantiGraph.breakPointSmallScreen||(plantiGraph.evs.circsHover(a),plantiGraph.evs.circTooltip(a))},circClick:function(a){plantiGraph.countryPop.activa(a.key)},circOut:function(a){$("#graph .tooltip").remove(),$("#graph").removeClass("hover"),plantiGraph.viz.links.attr("class",plantiGraph.evs.linksClass),plantiGraph.viz.circExp.attr("class","circExp"),plantiGraph.viz.circsImp.attr("class","circImp")},linksVisibilityCheck:function(a){return a.source.name&&!a.source.posX?"hidden":a.source.name&&!a.target.posX?"hidden":2!=plantiGraph.act.type.length?"hidden":plantiGraph.viz.scale.lines(a.val)<plantiGraph.minLine?"hidden":"visible"},textVisibilityCheck:function(a){return a.posX?2==plantiGraph.act.type.length?a.rTot<(plantiGraph.breakPointSmallScreen?plantiGraph.maxWidthTextMovil:plantiGraph.maxWidthText)?"hidden":"visible":$.inArray("imp",plantiGraph.act.type)==-1?a.rExp<(plantiGraph.breakPointSmallScreen?plantiGraph.maxWidthTextMovil:plantiGraph.maxWidthText)?"hidden":"visible":a.rImp<(plantiGraph.breakPointSmallScreen?plantiGraph.maxWidthTextMovil:plantiGraph.maxWidthText)?"hidden":"visible":"hidden"},circImpVisibilityCheck:function(a){return a.posX?$.inArray("imp",plantiGraph.act.type)==-1?"hidden":a.rImp<plantiGraph.minCirc?"hidden":"visible":"hidden"},circImpRadius:function(a){return a.posX?$.inArray("imp",plantiGraph.act.type)==-1?0:2==plantiGraph.act.type.length?a.rTotImp:a.rImp:0},circExpVisibilityCheck:function(a){return a.posX?$.inArray("exp",plantiGraph.act.type)==-1?"hidden":($.inArray("imp",plantiGraph.act.type)==-1?a.rExp:a.rTot)<plantiGraph.minCirc?"hidden":"visible":"hidden"},circExpRadius:function(a){return a.posX?$.inArray("exp",plantiGraph.act.type)==-1?0:$.inArray("imp",plantiGraph.act.type)==-1?a.rExp:a.rTot:0},collideRadiusFn:function(a){var b=a.rTot;return 2!=plantiGraph.act.type.length&&(b=$.inArray("imp",plantiGraph.act.type)==-1?a.rExp:a.rImp),b+5},changeProduct:function(a){a.preventDefault(),$("#prods .act").removeClass("act");var b=$(this).addClass("act").data("prod");return b&&plantiGraph.act.prod!=b?(plantiGraph.act.prod=b,void plantiGraph.tools.update()):void console.log("no hay producto")},gotoYear:function(a){!a||plantiGraph.act.year==a||a>plantiGraph.lastYear||a<plantiGraph.initYear||(plantiGraph.act.year=a,$("#years .act").removeClass("act"),$("#years .disabled").removeClass("disabled"),$('#years [data-year="'+a+'"]').addClass("act"),a==plantiGraph.lastYear&&$("#years .nextYear").addClass("disabled"),a==plantiGraph.initYear&&$("#years .prevYear").addClass("disabled"),$("#activeYear").html(a),plantiGraph.tools.update())},changeYear:function(a){a.preventDefault(),plantiGraph.evs.gotoYear($(this).data("year"))},prevYear:function(a){a.preventDefault(),plantiGraph.act.year!=plantiGraph.initYear&&plantiGraph.evs.gotoYear(plantiGraph.act.year-1)},nextYear:function(a){a.preventDefault(),plantiGraph.act.year!=plantiGraph.lastYear&&plantiGraph.evs.gotoYear(plantiGraph.act.year+1)},changeType:function(a){a.preventDefault();var b=$(this),c=b.data("type");$.inArray(c,plantiGraph.act.type)==-1?(b.addClass("act"),plantiGraph.act.type.push(c)):1==plantiGraph.act.type.length?(plantiGraph.act.type=["imp","exp"],
$("#type a").addClass("act")):(plantiGraph.act.type=[c],$("#type a.act").removeClass("act"),b.addClass("act")),plantiGraph.tools.update()}}};plantiGraph.init();</script> 


</body>
</html>